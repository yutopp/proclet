syntax = "proto3";

package v1;

option go_package="github.com/yutopp/koya/pkg/api/v1";

service KoyaService {
  rpc RunOneshot (RunOneshotRequest) returns (stream RunOneshotResponse) {}
}

message RunOneshotRequest {
  string code = 1;
}

message RunOneshotResponse {
  oneof response {
    Output output = 1;
  }
}

message Output {
  int64 kind = 1;   // 0 = stdout, 1 = stderr
  bytes buffer = 2; // utf8
}
